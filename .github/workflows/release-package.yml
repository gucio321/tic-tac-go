name: Node.js Package

on:
  push:
    branches: ['master']

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: Set up Go 1.14
        uses: actions/setup-go@v2.1.3
        with:
          go-version: 1.14
          id: go

      - name: Install dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y xvfb libxcursor-dev libxrandr-dev libxinerama-dev libxi-dev libgl1-mesa-dev libsdl2-dev libasound2-dev > /dev/null 2>&1

      - name: Build
        run: go build .

      - name: Upload binaries to release
        uses: svenstaro/upload-release-action@v2
        with:
          repo_token: ${{ secrets.GITHUB_TOKEN }}
          file: tic-tac-go
          asset_name: tic-tac-go
          tag: ${{ github.ref }}
          overwrite: true
          body: "This is my release text"

            #- name: publish
            #run: cp tic-tac-go Public/

            #publish-gpr:
            #   needs: build
            #  runs-on: ubuntu-latest
            # steps:
            #  - uses: actions/checkout@v2
            # - uses: actions/setup-node@v1
            #  with:
            #   node-version: 12
            #  registry-url: https://npm.pkg.github.com/
            #     - run: npm ci
            #    - run: npm publish
            #     env:
            #      NODE_AUTH_TOKEN: ${{secrets.GITHUB_TOKEN}}
